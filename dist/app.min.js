!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){const{refreshMusic,rando}=require("./fungus");module.exports={initiateBackgroundMusic:function(propsmatching,propsplaying){refreshMusic(propsmatching),refreshMusic(propsplaying);let audio;!function theTimeHasCome(){document.querySelectorAll("button").forEach(b=>{const text=b.textContent.toLowerCase(),len=propsmatching.bgms.length;if(text.match("play")||text.match("new")){const clickList=()=>{function whenended(){audio.removeEventListener("ended",whenended),(audio=propsmatching.bgms[rando(len)]).currentTime=0,audio.play(),audio.addEventListener("ended",whenended)}(audio=propsmatching.bgms[rando(len)]).currentTime=0,audio.play(),audio.addEventListener("ended",whenended),b.removeEventListener("click",clickList);const intern=setInterval(()=>{const chat=document.querySelector(".chat-scroll-area-component");if(chat.lastElementChild.textContent.toLowerCase().match("new game")){clearInterval(intern),audio.pause(),audio.removeEventListener("ended",whenended);const lenp=propsplaying.bgms.length;function whenplayingended(){audio.removeEventListener("ended",whenplayingended),(audio=propsplaying.bgms[rando(lenp)]).currentTime=0,audio.play(),audio.addEventListener("ended",whenplayingended)}(audio=propsplaying.bgms[rando(lenp)]).currentTime=0,audio.play(),audio.addEventListener("ended",whenplayingended);const lintern=setInterval(()=>{const chat=document.querySelector(".chat-scroll-area-component");chat.lastElementChild.textContent.toLowerCase().match("good sport")&&(clearInterval(lintern),audio.pause(),audio.removeEventListener("ended",whenplayingended),theTimeHasCome())})}},100)};b.addEventListener("click",clickList)}})}()}}},{"./fungus":2}],2:[function(require,module,exports){const{close,pointer,playlistEven,playlistOdd,padside,musicname}=require("./styles");function setStyle(elem,...styles){for(const style of styles)for(const prop in style)elem.style[prop]=style[prop]}function addEvent(elem,events){for(const event in events)elem.addEventListener(event,events[event])}function l(tag,styles,childs,events){const elem=document.createElement(tag);setStyle(elem,...styles);for(const child of childs)"string"==typeof child?elem.append(document.createTextNode(child)):elem.append(child);return events&&addEvent(elem,events),elem}function refreshMusic(props){const{id,bgm,bbm,list,music,path}=props;for(localStorage.setItem(id,JSON.stringify(bgm)),props.bgms=[];list.lastChild;)list.removeChild(list.lastChild);for(;music.lastChild;)music.removeChild(music.lastChild);0===bbm.length?list.appendChild(l("li",[],["-"])):bgm.forEach(function(bg,i){var even=i%2==0;list.appendChild(l("li",[even?playlistEven:playlistOdd],[l("div",[musicname],[bg]),l("span",[close,pointer,padside],["X"],{click:function(){bgm.splice(i,1),refreshMusic(props)}})]));const audio=document.createElement("audio");audio.src="http://localhost:9696/"+path+"/"+bg,"playing"===path&&(audio.volume=.3),music.appendChild(audio),props.bgms.push(audio)})}module.exports={addEvent:addEvent,addMuseh:function(props){return function(ev){for(const file of ev.target.files)props.bgm.push(file.name);refreshMusic(props)}},l:l,muse:function(onchange){const elem=document.createElement("input");return elem.type="file",elem.accept=".mp3",elem.multiple=!0,elem.style.display="none",onchange&&elem.addEventListener("change",onchange),elem},setStyle:setStyle,rando:function(max){return Math.floor(Math.random()*max)},refreshMusic:refreshMusic}},{"./styles":4}],3:[function(require,module,exports){var{border,center,close,fullheight,mainbox,navbar,pad5,padside,playlist,pointer}=require("./styles");const{l,muse,addMuseh}=require("./fungus"),initiateBackgroundMusic=require("./chessfun")["initiateBackgroundMusic"];var require=localStorage.getItem("matchbgm")||"[]",localplaybgm=localStorage.getItem("playbgm")||"[]",require=JSON.parse(require),localplaybgm=JSON.parse(localplaybgm),listMatch=l("ul",[playlist],[]),playlist=l("ul",[playlist],[]),musicMatch=document.createElement("div"),musicBgm=document.createElement("div"),require={id:"matchbgm",bgm:require,bgms:[],list:listMatch,music:musicMatch,bbm:require,path:"matching"},localplaybgm={id:"playbgm",bgm:localplaybgm,bgms:[],list:playlist,music:musicBgm,bbm:localplaybgm,path:"playing"};const inputMatch=muse(addMuseh(require)),inputBgm=muse(addMuseh(localplaybgm)),app=l("div",[mainbox,border,pad5],[l("div",[navbar],[l("span",[],["Chess BGM"]),l("span",[border,close,padside,pointer],["X"],{click:function(){app.style.display="none"}})]),l("div",[border,pad5,fullheight,{overflow:"scroll"}],[l("div",[],[l("span",[],["Matching"]),listMatch,musicMatch,l("div",[center],[inputMatch,l("span",[border,padside,pointer],["+"],{click:function(){inputMatch.click()}})])]),l("div",[],[l("span",[],["Background"]),playlist,musicBgm,l("div",[center],[inputBgm,l("span",[border,padside,pointer],["+"],{click:function(){inputBgm.click()}})])])])]);document.body.appendChild(app),initiateBackgroundMusic(require,localplaybgm)},{"./chessfun":1,"./fungus":2,"./styles":4}],4:[function(require,module,exports){var playlistEven={backgroundColor:"white",padding:"1px",fontSize:"10px"};module.exports={border:{border:"1px solid black"},center:{textAlign:"center",fontWeight:"bolder"},close:{float:"right",fontFamily:"consolas"},fullheight:{height:"280px"},mainbox:{backgroundColor:"white",zIndex:"99999",fontSize:"8px",width:"240px",height:"320px",position:"fixed",bottom:"10px",right:"10px"},musicname:{width:"90%",display:"inline-block"},navbar:{marginBottom:"5px"},pad5:{padding:"5px"},padside:{padding:"0px 4px"},playlist:{margin:"7px 0px",listStyle:"none",paddingLeft:"0px",border:"1px solid black"},playlistEven:playlistEven,playlistOdd:{backgroundColor:"black",color:"white",padding:"1px",fontSize:"10px"},pointer:{cursor:"pointer"}}},{}]},{},[3]);
